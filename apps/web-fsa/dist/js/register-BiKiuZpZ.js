var v=(d,u,o)=>new Promise((r,t)=>{var l=n=>{try{m(o.next(n))}catch(c){t(c)}},i=n=>{try{m(o.throw(n))}catch(c){t(c)}},m=n=>n.done?r(n.value):Promise.resolve(n.value).then(l,i);m((o=o.apply(d,u)).next())});import{G as $,$ as e,H as y}from"./bootstrap-nS_r6Uzy.js";import{T as V}from"./auth-title-syvjO5h0.js";import{d as S,Q as B,c as _,j as x,k,b as g,m as P,K as b,v as w,L as h,x as p,u as s,n as N,r as A,D as C,E as F}from"../jse/index-index-BsdptGcH.js";import{u as L,a as T,b as R}from"./use-vben-form-qIoZL4uF.js";import"./index-BMGsZtLz.js";import"./checkbox.vue_vue_type_script_setup_true_lang-BsbbvZXe.js";import"./render-content.vue_vue_type_script_lang-0IkNOgdT.js";const D={class:"mt-4 text-center text-sm"},I=S({name:"RegisterForm",__name:"register",props:{formSchema:{default:()=>[]},loading:{type:Boolean,default:!1},loginPath:{default:"/auth/login"},title:{default:""},subTitle:{default:""},submitButtonText:{default:""}},emits:["submit"],setup(d,{expose:u,emit:o}){const r=d,t=o,[l,i]=L(B({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:_(()=>r.formSchema),showDefaultActions:!1})),m=$();function n(){return v(this,null,function*(){const{valid:a}=yield i.validate(),f=yield i.getValues();a&&t("submit",f)})}function c(){m.push(r.loginPath)}return u({getFormApi:()=>i}),(a,f)=>(k(),x("div",null,[g(V,null,{desc:b(()=>[w(a.$slots,"subTitle",{},()=>[h(p(a.subTitle||s(e)("authentication.signUpSubtitle")),1)])]),default:b(()=>[w(a.$slots,"title",{},()=>[h(p(a.title||s(e)("authentication.createAnAccount"))+" ðŸš€ ",1)])]),_:3}),g(s(l)),g(s(y),{class:N([{"cursor-wait":a.loading},"mt-2 w-full"]),loading:a.loading,"aria-label":"register",onClick:n},{default:b(()=>[w(a.$slots,"submitButtonText",{},()=>[h(p(a.submitButtonText||s(e)("authentication.signUp")),1)])]),_:3},8,["class","loading"]),P("div",D,[h(p(s(e)("authentication.alreadyHaveAccount"))+" ",1),P("span",{class:"vben-link text-sm font-normal",onClick:f[0]||(f[0]=q=>c())},p(s(e)("authentication.goToLogin")),1)])]))}}),Q=S({name:"Register",__name:"register",setup(d){const u=A(!1),o=_(()=>[{component:"VbenInput",componentProps:{placeholder:e("authentication.usernameTip")},fieldName:"username",label:e("authentication.username"),rules:T().min(1,{message:e("authentication.usernameTip")})},{component:"VbenInputPassword",componentProps:{passwordStrength:!0,placeholder:e("authentication.password")},fieldName:"password",label:e("authentication.password"),renderComponentContent(){return{strengthText:()=>e("authentication.passwordStrength")}},rules:T().min(1,{message:e("authentication.passwordTip")})},{component:"VbenInputPassword",componentProps:{placeholder:e("authentication.confirmPassword")},dependencies:{rules(t){const{password:l}=t;return T({required_error:e("authentication.passwordTip")}).min(1,{message:e("authentication.passwordTip")}).refine(i=>i===l,{message:e("authentication.confirmPasswordTip")})},triggerFields:["password"]},fieldName:"confirmPassword",label:e("authentication.confirmPassword")},{component:"VbenCheckbox",fieldName:"agreePolicy",renderComponentContent:()=>({default:()=>C("span",[e("authentication.agree"),C("a",{class:"vben-link ml-1 ",href:""},`${e("authentication.privacyPolicy")} & ${e("authentication.terms")}`)])}),rules:R().refine(t=>!!t,{message:e("authentication.agreeTip")})}]);function r(t){console.log("register submit:",t)}return(t,l)=>(k(),F(s(I),{"form-schema":o.value,loading:u.value,onSubmit:r},null,8,["form-schema","loading"]))}});export{Q as default};
