var T=(m,u,n)=>new Promise((l,t)=>{var c=a=>{try{s(n.next(a))}catch(r){t(r)}},b=a=>{try{s(n.throw(a))}catch(r){t(r)}},s=a=>a.done?l(a.value):Promise.resolve(a.value).then(c,b);s((n=n.apply(m,u)).next())});import{b2 as $,b1 as e,b3 as C}from"./bootstrap-BJQ4xY_l.js";import{T as w}from"./auth-title-D0rZzLTn.js";import{u as x,s as B}from"./use-vben-form-9RyIkVnb.js";import{a4 as k,R as L,J as S,av as N,ab as V,x as p,ac as f,a8 as _,ai as h,aj as g,a7 as i,aD as P,aV as y,P as A,aa as D}from"../jse/index-index-CZjfKQLv.js";import"./index-vlz9cqoy.js";import"./checkbox.vue_vue_type_script_setup_true_lang-obtDsCTt.js";import"./render-content.vue_vue_type_script_lang-DyZFyp8x.js";const E={class:"text-muted-foreground"},F=k({name:"AuthenticationCodeLogin",__name:"code-login",props:{formSchema:{},loading:{type:Boolean,default:!1},loginPath:{default:"/auth/login"},title:{default:""},subTitle:{default:""},submitButtonText:{default:""}},emits:["submit"],setup(m,{expose:u,emit:n}){const l=m,t=n,c=$(),[b,s]=x(L({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:S(()=>l.formSchema),showDefaultActions:!1}));function a(){return T(this,null,function*(){const{valid:o}=yield s.validate(),d=yield s.getValues();o&&t("submit",d)})}function r(){c.push(l.loginPath)}return u({getFormApi:()=>s}),(o,d)=>(V(),N("div",null,[p(w,null,{desc:f(()=>[P("span",E,[_(o.$slots,"subTitle",{},()=>[h(g(o.subTitle||i(e)("authentication.codeSubtitle")),1)])])]),default:f(()=>[_(o.$slots,"title",{},()=>[h(g(o.title||i(e)("authentication.welcomeBack"))+" ðŸ“² ",1)])]),_:3}),p(i(b)),p(i(C),{class:y([{"cursor-wait":o.loading},"w-full"]),loading:o.loading,onClick:a},{default:f(()=>[_(o.$slots,"submitButtonText",{},()=>[h(g(o.submitButtonText||i(e)("common.login")),1)])]),_:3},8,["class","loading"]),p(i(C),{class:"mt-4 w-full",variant:"outline",onClick:d[0]||(d[0]=R=>r())},{default:f(()=>[h(g(i(e)("common.back")),1)]),_:1})]))}}),v=6,O=k({name:"CodeLogin",__name:"code-login",setup(m){const u=A(!1),n=S(()=>[{component:"VbenInput",componentProps:{placeholder:e("authentication.mobile")},fieldName:"phoneNumber",label:e("authentication.mobile"),rules:B().min(1,{message:e("authentication.mobileTip")}).refine(t=>/^\d{11}$/.test(t),{message:e("authentication.mobileErrortip")})},{component:"VbenPinInput",componentProps:{codeLength:v,createText:t=>t>0?e("authentication.sendText",[t]):e("authentication.sendCode"),placeholder:e("authentication.code")},fieldName:"code",label:e("authentication.code"),rules:B().length(v,{message:e("authentication.codeTip",[v])})}]);function l(t){return T(this,null,function*(){console.log(t)})}return(t,c)=>(V(),D(i(F),{"form-schema":n.value,loading:u.value,onSubmit:l},null,8,["form-schema","loading"]))}});export{O as default};
