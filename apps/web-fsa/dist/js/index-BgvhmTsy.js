const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index-fo8MsSjQ.js","js/bootstrap-nS_r6Uzy.js","jse/index-index-BsdptGcH.js","css/bootstrap-BrS83-id.css","js/BaseInput-CIdroiOM.js","js/ResizeObserver.es-CDE7jhPe.js","js/index-CsgQ6Jny.js","js/Trigger-DmB6V4sb.js","js/responsiveObserve-7YYVRPOL.js","js/EyeOutlined-BiKHx9cD.js","js/index-Br3j_qDQ.js","js/colors-D59xGIwT.js","js/roundedArrow-EYTrNAJt.js","js/CheckOutlined-zUdIMjW3.js","js/useRefs-Bl8svD-7.js","js/collapseMotion-C22yorKZ.js","js/useMergedState-DdQG7FS2.js","js/useFlexGapSupport-DcJhzveC.js","js/_arrayIncludes-B8uzE354.js","js/FormItemContext-CbGyyj-A.js","js/index-CcPG30jJ.js","js/index-nI7GpMDK.js","js/shallowequal-BMhVrTHr.js","js/Overflow-CQR0eu18.js","js/slide-B2l4e1mx.js","js/DownOutlined-Cy6ShKlK.js","js/index-BXkl_ASy.js","js/index-DZFK9PNa.js","js/SearchOutlined-8BTzpijE.js","js/move-k9NGEOQn.js","js/index-DhGJMtpN.js","js/index-BGX4ANgK.js","js/index-BpouPXFr.js","js/statusUtils-DG2SPV6v.js","js/index-DFgcUpmS.js","js/index-Bbbh6CzF.js","js/Checkbox-BijoKviF.js","js/index-CBzSDfyB.js","js/index-CGfLNaW6.js","js/index-BajHvaj3.js","js/index-L3enaNd2.js","js/index-5sdEDQzI.js","js/index-Ce9AbRdg.js","js/index-VWkg5yQM.js","js/dayjs-DmDMiJS0.js","js/index-BTkr0HeI.js","js/index-Bs6a4Z0x.js","js/index-DTqBHIcz.js","js/index-DuRMNH34.js","js/index-QkYnC-9K.js","js/index-CndZirRo.js","js/index-B67w507Q.js","js/index-aJINiB4E.js","js/dayjs-Du_jVSHO.js","js/loreal-database-modal-Aj1LXcJ6.js","js/form-B-jfQdK6.js","js/use-vben-form-qIoZL4uF.js","js/index-BMGsZtLz.js","js/checkbox.vue_vue_type_script_setup_true_lang-BsbbvZXe.js","js/render-content.vue_vue_type_script_lang-0IkNOgdT.js","css/use-vben-form-CLbCCrIi.css","js/use-modal-qTZq-J3o.js","js/x-BlW8OOV2.js","css/loreal-database-modal-BmxLDOE5.css","js/page.vue_vue_type_script_setup_true_lang-7X23zIuy.js"])))=>i.map(i=>d[i]);
var K=(e,t,n)=>new Promise((a,o)=>{var l=b=>{try{p(n.next(b))}catch(x){o(x)}},c=b=>{try{p(n.throw(b))}catch(x){o(x)}},p=b=>b.done?a(b.value):Promise.resolve(b.value).then(l,c);p((n=n.apply(e,t)).next())});import{r as M,Q as ie,f as Ie,d as se,c as m,w as Q,a as ft,s as te,b as s,F as nt,i as gt,p as mt,W as at,a0 as wt,T as le,E as Le,k as xe,K as W,u as N,m as oe,j as ht,l as bt,L as de,x as ze,V as Pe,D as H,_ as yt}from"../jse/index-index-BsdptGcH.js";import{ac as Ct,ad as St,_ as g,aX as Ue,d as T,a as ae,bA as xt,bB as Pt,bC as re,D as Ge,P as Ot,v as fe,g as Mt,m as He,bD as It,bE as At,ai as kt,av as Dt,r as Nt,ak as $t,u as ot,aj as Oe,Q as jt,am as Lt,$ as Xe,Z as pe,bF as zt,a0 as A,q as Et}from"./bootstrap-nS_r6Uzy.js";import{g as Tt,a as _t,d as Rt,L as Yt,b as Bt}from"./loreal-database-modal-Aj1LXcJ6.js";import{R as Vt,L as Ut,C as Gt,T as Ht}from"./index-CcPG30jJ.js";import Xt from"./index-BpouPXFr.js";import Zt from"./index-CGfLNaW6.js";import Ft from"./index-QkYnC-9K.js";import{_ as Wt}from"./page.vue_vue_type_script_setup_true_lang-7X23zIuy.js";import{g as Qt,a as rt}from"./BaseInput-CIdroiOM.js";import{u as it}from"./useMergedState-DdQG7FS2.js";import{E as Jt}from"./EyeOutlined-BiKHx9cD.js";import{T as Ze}from"./index-VWkg5yQM.js";import{u as qt}from"./use-modal-qTZq-J3o.js";import{T as Fe}from"./index-Br3j_qDQ.js";var Kt="[object Number]";function en(e){return typeof e=="number"||Ct(e)&&St(e)==Kt}function tn(e){const t=M(null),n=ie(g({},e)),a=M([]),o=l=>{t.value===null&&(a.value=[],t.value=Ue(()=>{let c;a.value.forEach(p=>{c=g(g({},c),p)}),g(n,c),t.value=null})),a.value.push(l)};return Ie(()=>{t.value&&Ue.cancel(t.value)}),[n,o]}function We(e,t,n,a){const o=t+n,l=(n-a)/2;if(n>a){if(t>0)return{[e]:l};if(t<0&&o<a)return{[e]:-l}}else if(t<0||o>a)return{[e]:t<0?l:-l};return{}}function nn(e,t,n,a){const{width:o,height:l}=Qt();let c=null;return e<=o&&t<=l?c={x:0,y:0}:(e>o||t>l)&&(c=g(g({},We("x",n,e,o)),We("y",a,t,l))),c}var an=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]]);return n};const Qe=Symbol("previewGroupContext"),Te={provide:e=>{mt(Qe,e)},inject:()=>gt(Qe,{isPreviewGroup:te(!1),previewUrls:m(()=>new Map),setPreviewUrls:()=>{},current:M(null),setCurrent:()=>{},setShowPreview:()=>{},setMousePosition:()=>{},registerImage:null,rootClassName:""})},on=()=>({previewPrefixCls:String,preview:{type:[Boolean,Object],default:!0},icons:{type:Object,default:()=>({})}}),lt=se({compatConfig:{MODE:3},name:"PreviewGroup",inheritAttrs:!1,props:on(),setup(e,t){let{slots:n}=t;const a=m(()=>{const d={visible:void 0,onVisibleChange:()=>{},getContainer:void 0,current:0};return typeof e.preview=="object"?ct(e.preview,d):d}),o=ie(new Map),l=M(),c=m(()=>a.value.visible),p=m(()=>a.value.getContainer),b=(d,j)=>{var D,r;(r=(D=a.value).onVisibleChange)===null||r===void 0||r.call(D,d,j)},[x,f]=it(!!c.value,{value:c,onChange:b}),y=M(null),z=m(()=>c.value!==void 0),C=m(()=>Array.from(o.keys())),O=m(()=>C.value[a.value.current]),k=m(()=>new Map(Array.from(o).filter(d=>{let[,{canPreview:j}]=d;return!!j}).map(d=>{let[j,{url:D}]=d;return[j,D]}))),P=function(d,j){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;o.set(d,{url:j,canPreview:D})},I=d=>{l.value=d},E=d=>{y.value=d},V=function(d,j){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=()=>{o.delete(d)};return o.set(d,{url:j,canPreview:D}),r},$=d=>{d==null||d.stopPropagation(),f(!1),E(null)};return Q(O,d=>{I(d)},{immediate:!0,flush:"post"}),ft(()=>{x.value&&z.value&&I(O.value)},{flush:"post"}),Te.provide({isPreviewGroup:te(!0),previewUrls:k,setPreviewUrls:P,current:l,setCurrent:I,setShowPreview:f,setMousePosition:E,registerImage:V}),()=>{const d=an(a.value,[]);return s(nt,null,[n.default&&n.default(),s(st,T(T({},d),{},{"ria-hidden":!x.value,visible:x.value,prefixCls:e.previewPrefixCls,onClose:$,mousePosition:y.value,src:k.value.get(l.value),icons:e.icons,getContainer:p.value}),null)])}}}),ee={x:0,y:0},rn=g(g({},Pt()),{src:String,alt:String,rootClassName:String,icons:{type:Object,default:()=>({})}}),st=se({compatConfig:{MODE:3},name:"Preview",inheritAttrs:!1,props:rn,emits:["close","afterClose"],setup(e,t){let{emit:n,attrs:a}=t;const{rotateLeft:o,rotateRight:l,zoomIn:c,zoomOut:p,close:b,left:x,right:f,flipX:y,flipY:z}=ie(e.icons),C=te(1),O=te(0),k=ie({x:1,y:1}),[P,I]=tn(ee),E=()=>n("close"),V=te(),$=ie({originX:0,originY:0,deltaX:0,deltaY:0}),d=te(!1),j=Te.inject(),{previewUrls:D,current:r,isPreviewGroup:u,setCurrent:i}=j,w=m(()=>D.value.size),L=m(()=>Array.from(D.value.keys())),S=m(()=>L.value.indexOf(r.value)),ue=m(()=>u.value?D.value.get(r.value):e.src),B=m(()=>u.value&&w.value>1),_=te({wheelDirection:0}),U=()=>{C.value=1,O.value=0,k.x=1,k.y=1,I(ee),n("afterClose")},h=v=>{v?C.value+=.5:C.value++,I(ee)},G=v=>{C.value>1&&(v?C.value-=.5:C.value--),I(ee)},R=()=>{O.value+=90},J=()=>{O.value-=90},ge=()=>{k.x=-k.x},Ae=()=>{k.y=-k.y},me=v=>{v.preventDefault(),v.stopPropagation(),S.value>0&&i(L.value[S.value-1])},we=v=>{v.preventDefault(),v.stopPropagation(),S.value<w.value-1&&i(L.value[S.value+1])},ce=ae({[`${e.prefixCls}-moving`]:d.value}),ke=`${e.prefixCls}-operations-operation`,De=`${e.prefixCls}-operations-icon`,he=[{icon:b,onClick:E,type:"close"},{icon:c,onClick:()=>h(),type:"zoomIn"},{icon:p,onClick:()=>G(),type:"zoomOut",disabled:m(()=>C.value===1)},{icon:l,onClick:R,type:"rotateRight"},{icon:o,onClick:J,type:"rotateLeft"},{icon:y,onClick:ge,type:"flipX"},{icon:z,onClick:Ae,type:"flipY"}],be=()=>{if(e.visible&&d.value){const v=V.value.offsetWidth*C.value,Y=V.value.offsetHeight*C.value,{left:X,top:q}=rt(V.value),Z=O.value%180!==0;d.value=!1;const F=nn(Z?Y:v,Z?v:Y,X,q);F&&I(g({},F))}},Ne=v=>{v.button===0&&(v.preventDefault(),v.stopPropagation(),$.deltaX=v.pageX-P.x,$.deltaY=v.pageY-P.y,$.originX=P.x,$.originY=P.y,d.value=!0)},ye=v=>{e.visible&&d.value&&I({x:v.pageX-$.deltaX,y:v.pageY-$.deltaY})},$e=v=>{if(!e.visible)return;v.preventDefault();const Y=v.deltaY;_.value={wheelDirection:Y}},je=v=>{!e.visible||!B.value||(v.preventDefault(),v.keyCode===Ge.LEFT?S.value>0&&i(L.value[S.value-1]):v.keyCode===Ge.RIGHT&&S.value<w.value-1&&i(L.value[S.value+1]))},Ce=()=>{e.visible&&(C.value!==1&&(C.value=1),(P.x!==ee.x||P.y!==ee.y)&&I(ee))};let ve=()=>{};return Ie(()=>{Q([()=>e.visible,d],()=>{ve();let v,Y;const X=re(window,"mouseup",be,!1),q=re(window,"mousemove",ye,!1),Z=re(window,"wheel",$e,{passive:!1}),F=re(window,"keydown",je,!1);try{window.top!==window.self&&(v=re(window.top,"mouseup",be,!1),Y=re(window.top,"mousemove",ye,!1))}catch(Ve){}ve=()=>{X.remove(),q.remove(),Z.remove(),F.remove(),v&&v.remove(),Y&&Y.remove()}},{flush:"post",immediate:!0}),Q([_],()=>{const{wheelDirection:v}=_.value;v>0?G(!0):v<0&&h(!0)})}),at(()=>{ve()}),()=>{const{visible:v,prefixCls:Y,rootClassName:X}=e;return s(xt,T(T({},a),{},{transitionName:e.transitionName,maskTransitionName:e.maskTransitionName,closable:!1,keyboard:!0,prefixCls:Y,onClose:E,afterClose:U,visible:v,wrapClassName:ce,rootClassName:X,getContainer:e.getContainer}),{default:()=>[s("div",{class:[`${e.prefixCls}-operations-wrapper`,X]},[s("ul",{class:`${e.prefixCls}-operations`},[he.map(q=>{let{icon:Z,onClick:F,type:Ve,disabled:Se}=q;return s("li",{class:ae(ke,{[`${e.prefixCls}-operations-operation-disabled`]:Se&&(Se==null?void 0:Se.value)}),onClick:F,key:Ve},[wt(Z,{class:De})])})])]),s("div",{class:`${e.prefixCls}-img-wrapper`,style:{transform:`translate3d(${P.x}px, ${P.y}px, 0)`}},[s("img",{onMousedown:Ne,onDblclick:Ce,ref:V,class:`${e.prefixCls}-img`,src:ue.value,alt:e.alt,style:{transform:`scale3d(${k.x*C.value}, ${k.y*C.value}, 1) rotate(${O.value}deg)`}},null)]),B.value&&s("div",{class:ae(`${e.prefixCls}-switch-left`,{[`${e.prefixCls}-switch-left-disabled`]:S.value<=0}),onClick:me},[x]),B.value&&s("div",{class:ae(`${e.prefixCls}-switch-right`,{[`${e.prefixCls}-switch-right-disabled`]:S.value>=w.value-1}),onClick:we},[f])]})}}});var ln=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]]);return n};const ut=()=>({src:String,wrapperClassName:String,wrapperStyle:{type:Object,default:void 0},rootClassName:String,prefixCls:String,previewPrefixCls:String,width:[Number,String],height:[Number,String],previewMask:{type:[Boolean,Function],default:void 0},placeholder:Ot.any,fallback:String,preview:{type:[Boolean,Object],default:!0},onClick:{type:Function},onError:{type:Function}}),ct=(e,t)=>{const n=g({},e);return Object.keys(t).forEach(a=>{e[a]===void 0&&(n[a]=t[a])}),n};let sn=0;const vt=se({compatConfig:{MODE:3},name:"VcImage",inheritAttrs:!1,props:ut(),emits:["click","error"],setup(e,t){let{attrs:n,slots:a,emit:o}=t;const l=m(()=>e.prefixCls),c=m(()=>`${l.value}-preview`),p=m(()=>{const h={visible:void 0,onVisibleChange:()=>{},getContainer:void 0};return typeof e.preview=="object"?ct(e.preview,h):h}),b=m(()=>{var h;return(h=p.value.src)!==null&&h!==void 0?h:e.src}),x=m(()=>e.placeholder&&e.placeholder!==!0||a.placeholder),f=m(()=>p.value.visible),y=m(()=>p.value.getContainer),z=m(()=>f.value!==void 0),C=(h,G)=>{var R,J;(J=(R=p.value).onVisibleChange)===null||J===void 0||J.call(R,h,G)},[O,k]=it(!!f.value,{value:f,onChange:C}),P=M(x.value?"loading":"normal");Q(()=>e.src,()=>{P.value=x.value?"loading":"normal"});const I=M(null),E=m(()=>P.value==="error"),V=Te.inject(),{isPreviewGroup:$,setCurrent:d,setShowPreview:j,setMousePosition:D,registerImage:r}=V,u=M(sn++),i=m(()=>e.preview&&!E.value),w=()=>{P.value="normal"},L=h=>{P.value="error",o("error",h)},S=h=>{if(!z.value){const{left:G,top:R}=rt(h.target);$.value?(d(u.value),D({x:G,y:R})):I.value={x:G,y:R}}$.value?j(!0):k(!0),o("click",h)},ue=()=>{k(!1),z.value||(I.value=null)},B=M(null);Q(()=>B,()=>{P.value==="loading"&&B.value.complete&&(B.value.naturalWidth||B.value.naturalHeight)&&w()});let _=()=>{};Ie(()=>{Q([b,i],()=>{if(_(),!$.value)return()=>{};_=r(u.value,b.value,i.value),i.value||_()},{flush:"post",immediate:!0})}),at(()=>{_()});const U=h=>en(h)?h+"px":h;return()=>{const{prefixCls:h,wrapperClassName:G,fallback:R,src:J,placeholder:ge,wrapperStyle:Ae,rootClassName:me,width:we,height:ce,crossorigin:ke,decoding:De,alt:he,sizes:be,srcset:Ne,usemap:ye,class:$e,style:je}=g(g({},e),n),Ce=p.value,{icons:ve,maskClassName:v}=Ce,Y=ln(Ce,["icons","maskClassName"]),X=ae(h,G,me,{[`${h}-error`]:E.value}),q=E.value&&R?R:b.value,Z={crossorigin:ke,decoding:De,alt:he,sizes:be,srcset:Ne,usemap:ye,width:we,height:ce,class:ae(`${h}-img`,{[`${h}-img-placeholder`]:ge===!0},$e),style:g({height:U(ce)},je)};return s(nt,null,[s("div",{class:X,onClick:i.value?S:F=>{o("click",F)},style:g({width:U(we),height:U(ce)},Ae)},[s("img",T(T(T({},Z),E.value&&R?{src:R}:{onLoad:w,onError:L,src:J}),{},{ref:B}),null),P.value==="loading"&&s("div",{"aria-hidden":"true",class:`${h}-placeholder`},[ge||a.placeholder&&a.placeholder()]),a.previewMask&&i.value&&s("div",{class:[`${h}-mask`,v]},[a.previewMask()])]),!$.value&&i.value&&s(st,T(T({},Y),{},{"aria-hidden":!O.value,visible:O.value,prefixCls:c.value,onClose:ue,mousePosition:I.value,src:q,alt:he,getContainer:y.value,icons:ve,rootClassName:me}),null)])}}});vt.PreviewGroup=lt;var un={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"};function Je(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),a.forEach(function(o){cn(e,o,n[o])})}return e}function cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=function(t,n){var a=Je({},t,n.attrs);return s(fe,Je({},a,{icon:un}),null)};_e.displayName="RotateLeftOutlined";_e.inheritAttrs=!1;var vn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"};function qe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),a.forEach(function(o){dn(e,o,n[o])})}return e}function dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Re=function(t,n){var a=qe({},t,n.attrs);return s(fe,qe({},a,{icon:vn}),null)};Re.displayName="RotateRightOutlined";Re.inheritAttrs=!1;var pn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"};function Ke(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),a.forEach(function(o){fn(e,o,n[o])})}return e}function fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ye=function(t,n){var a=Ke({},t,n.attrs);return s(fe,Ke({},a,{icon:pn}),null)};Ye.displayName="ZoomInOutlined";Ye.inheritAttrs=!1;var gn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"};function et(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),a.forEach(function(o){mn(e,o,n[o])})}return e}function mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Be=function(t,n){var a=et({},t,n.attrs);return s(fe,et({},a,{icon:gn}),null)};Be.displayName="ZoomOutOutlined";Be.inheritAttrs=!1;var wn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"};function tt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),a.forEach(function(o){hn(e,o,n[o])})}return e}function hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Me=function(t,n){var a=tt({},t,n.attrs);return s(fe,tt({},a,{icon:wn}),null)};Me.displayName="SwapOutlined";Me.inheritAttrs=!1;const Ee=e=>({position:e||"absolute",inset:0}),bn=e=>{const{iconCls:t,motionDurationSlow:n,paddingXXS:a,marginXXS:o,prefixCls:l}=e;return{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",background:new le("#000").setAlpha(.5).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${n}`,[`.${l}-mask-info`]:g(g({},Dt),{padding:`0 ${a}px`,[t]:{marginInlineEnd:o,svg:{verticalAlign:"baseline"}}})}},yn=e=>{const{previewCls:t,modalMaskBg:n,paddingSM:a,previewOperationColorDisabled:o,motionDurationSlow:l}=e,c=new le(n).setAlpha(.1),p=c.clone().setAlpha(.2);return{[`${t}-operations`]:g(g({},Nt(e)),{display:"flex",flexDirection:"row-reverse",alignItems:"center",color:e.previewOperationColor,listStyle:"none",background:c.toRgbString(),pointerEvents:"auto","&-operation":{marginInlineStart:a,padding:a,cursor:"pointer",transition:`all ${l}`,userSelect:"none","&:hover":{background:p.toRgbString()},"&-disabled":{color:o,pointerEvents:"none"},"&:last-of-type":{marginInlineStart:0}},"&-progress":{position:"absolute",left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%)"},"&-icon":{fontSize:e.previewOperationSize}})}},Cn=e=>{const{modalMaskBg:t,iconCls:n,previewOperationColorDisabled:a,previewCls:o,zIndexPopup:l,motionDurationSlow:c}=e,p=new le(t).setAlpha(.1),b=p.clone().setAlpha(.2);return{[`${o}-switch-left, ${o}-switch-right`]:{position:"fixed",insetBlockStart:"50%",zIndex:l+1,display:"flex",alignItems:"center",justifyContent:"center",width:e.imagePreviewSwitchSize,height:e.imagePreviewSwitchSize,marginTop:-e.imagePreviewSwitchSize/2,color:e.previewOperationColor,background:p.toRgbString(),borderRadius:"50%",transform:"translateY(-50%)",cursor:"pointer",transition:`all ${c}`,pointerEvents:"auto",userSelect:"none","&:hover":{background:b.toRgbString()},"&-disabled":{"&, &:hover":{color:a,background:"transparent",cursor:"not-allowed",[`> ${n}`]:{cursor:"not-allowed"}}},[`> ${n}`]:{fontSize:e.previewOperationSize}},[`${o}-switch-left`]:{insetInlineStart:e.marginSM},[`${o}-switch-right`]:{insetInlineEnd:e.marginSM}}},Sn=e=>{const{motionEaseOut:t,previewCls:n,motionDurationSlow:a,componentCls:o}=e;return[{[`${o}-preview-root`]:{[n]:{height:"100%",textAlign:"center",pointerEvents:"none"},[`${n}-body`]:g(g({},Ee()),{overflow:"hidden"}),[`${n}-img`]:{maxWidth:"100%",maxHeight:"100%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${a} ${t} 0s`,userSelect:"none",pointerEvents:"auto","&-wrapper":g(g({},Ee()),{transition:`transform ${a} ${t} 0s`,display:"flex",justifyContent:"center",alignItems:"center","&::before":{display:"inline-block",width:1,height:"50%",marginInlineEnd:-1,content:'""'}})},[`${n}-moving`]:{[`${n}-preview-img`]:{cursor:"grabbing","&-wrapper":{transitionDuration:"0s"}}}}},{[`${o}-preview-root`]:{[`${n}-wrap`]:{zIndex:e.zIndexPopup}}},{[`${o}-preview-operations-wrapper`]:{position:"fixed",insetBlockStart:0,insetInlineEnd:0,zIndex:e.zIndexPopup+1,width:"100%"},"&":[yn(e),Cn(e)]}]},xn=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",display:"inline-block",[`${t}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${t}-img-placeholder`]:{backgroundColor:e.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${t}-mask`]:g({},bn(e)),[`${t}-mask:hover`]:{opacity:1},[`${t}-placeholder`]:g({},Ee())}}},Pn=e=>{const{previewCls:t}=e;return{[`${t}-root`]:kt(e,"zoom"),"&":At(e,!0)}},dt=Mt("Image",e=>{const t=`${e.componentCls}-preview`,n=He(e,{previewCls:t,modalMaskBg:new le("#000").setAlpha(.45).toRgbString(),imagePreviewSwitchSize:e.controlHeightLG});return[xn(n),Sn(n),It(He(n,{componentCls:t})),Pn(n)]},e=>({zIndexPopup:e.zIndexPopupBase+80,previewOperationColor:new le(e.colorTextLightSolid).toRgbString(),previewOperationColorDisabled:new le(e.colorTextLightSolid).setAlpha(.25).toRgbString(),previewOperationSize:e.fontSizeIcon*1.5})),pt={rotateLeft:s(_e,null,null),rotateRight:s(Re,null,null),zoomIn:s(Ye,null,null),zoomOut:s(Be,null,null),close:s(jt,null,null),left:s(Ut,null,null),right:s(Vt,null,null),flipX:s(Me,null,null),flipY:s(Me,{rotate:90},null)},On=()=>({previewPrefixCls:String,preview:$t()}),Mn=se({compatConfig:{MODE:3},name:"AImagePreviewGroup",inheritAttrs:!1,props:On(),setup(e,t){let{attrs:n,slots:a}=t;const{prefixCls:o,rootPrefixCls:l}=ot("image",e),c=m(()=>`${o.value}-preview`),[p,b]=dt(o),x=m(()=>{const{preview:f}=e;if(f===!1)return f;const y=typeof f=="object"?f:{};return g(g({},y),{rootClassName:b.value,transitionName:Oe(l.value,"zoom",y.transitionName),maskTransitionName:Oe(l.value,"fade",y.maskTransitionName)})});return()=>p(s(lt,T(T({},g(g({},n),e)),{},{preview:x.value,icons:pt,previewPrefixCls:c.value}),a))}}),ne=se({name:"AImage",inheritAttrs:!1,props:ut(),setup(e,t){let{slots:n,attrs:a}=t;const{prefixCls:o,rootPrefixCls:l,configProvider:c}=ot("image",e),[p,b]=dt(o),x=m(()=>{const{preview:f}=e;if(f===!1)return f;const y=typeof f=="object"?f:{};return g(g({icons:pt},y),{transitionName:Oe(l.value,"zoom",y.transitionName),maskTransitionName:Oe(l.value,"fade",y.maskTransitionName)})});return()=>{var f,y;const z=((y=(f=c.locale)===null||f===void 0?void 0:f.value)===null||y===void 0?void 0:y.Image)||Lt.Image,C=()=>s("div",{class:`${o.value}-mask-info`},[s(Jt,null,null),z==null?void 0:z.preview]),{previewMask:O=n.previewMask||C}=e;return p(s(vt,T(T({},g(g(g({},a),e),{prefixCls:o.value})),{},{preview:x.value,rootClassName:ae(e.rootClassName,b.value)}),g(g({},n),{previewMask:typeof O=="function"?O:null})))}}});ne.PreviewGroup=Mn;ne.install=function(e){return e.component(ne.name,ne),e.component(ne.PreviewGroup.name,ne.PreviewGroup),e};const In={class:"mb-4"},An={class:"flex items-center gap-4 mb-4"},kn={key:0,class:"mb-2 text-sm text-gray-600"},Dn=se({__name:"index",setup(e){const t=M([]),n=M(!1),a=ie({current:1,pageSize:20,total:0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100","200"],showTotal:r=>`共 ${r} 条`}),o=M(""),l=M(void 0),c=M(null),p=M([]),b=M(!1),x=M(!1),f=M([]),y=m(()=>{if(!o.value)return f.value;const r=o.value.toLowerCase();return f.value.filter(u=>{var i,w,L,S;return((i=u.skuCode)==null?void 0:i.toLowerCase().includes(r))||((w=u.spuNameCn)==null?void 0:w.toLowerCase().includes(r))||((L=u.skuSpecName)==null?void 0:L.toLowerCase().includes(r))||((S=u.skuShortDesc)==null?void 0:S.toLowerCase().includes(r))})}),z=m(()=>{var L,S;const r=(L=a.current)!=null?L:1,u=(S=a.pageSize)!=null?S:20,i=(r-1)*u,w=i+u;return y.value.slice(i,w)});Q(y,r=>{a.total=r.length,a.current=1});const[C,O]=qt({connectedComponent:Yt,onOpenChange:r=>K(null,null,function*(){if(!r){const u=O.getData();u&&u.operationSuccess&&l.value&&(yield I(l.value))}})}),k=[{title:"商品图片",dataIndex:"spuImage",key:"spuImage",width:100,fixed:"left",customRender:({record:r})=>H(ne,{src:r.spuImage,width:60,height:60,fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==",preview:!0})},{title:"标识符",dataIndex:"skuCode",key:"skuCode",width:120,fixed:"left",customRender:({record:r})=>H(Fe,{title:`点击复制: ${r.skuCode}`},()=>H("span",{class:"cursor-pointer hover:text-blue-500",onClick:()=>{navigator.clipboard.writeText(r.skuCode),A.success("标识符已复制")}},r.skuCode))},{title:"商品ID",dataIndex:"skuId",key:"skuId",width:100,align:"center"},{title:"商品名称",dataIndex:"spuNameCn",key:"spuNameCn",width:250,ellipsis:!0,customRender:({record:r})=>H(Fe,{title:`点击复制: ${r.spuNameCn}`},()=>H("div",{class:"cursor-pointer hover:text-blue-500",onClick:()=>{navigator.clipboard.writeText(r.spuNameCn),A.success("商品名称已复制")}},[H("div",{class:"font-medium"},r.spuNameCn),r.skuShortDesc&&H("div",{class:"text-xs text-gray-500"},r.skuShortDesc)]))},{title:"规格",dataIndex:"skuSpecName",key:"skuSpecName",width:100,align:"center"},{title:"库存数量",dataIndex:"skuInvNum",key:"skuInvNum",width:120,align:"center"},{title:"销售价格",dataIndex:"skuSalePrice",key:"skuSalePrice",width:120,align:"center",customRender:({text:r})=>`¥${(r/100).toFixed(2)}`},{title:"是否礼包",dataIndex:"isVbPackage",key:"isVbPackage",width:100,align:"center",customRender:({record:r})=>r.isVbPackage?H(Ze,{color:"green"},()=>"礼包"):H(Ze,{color:"default"},()=>"单品")}];function P(){return K(this,null,function*(){try{b.value=!0;const r=yield Tt({});console.log("欧莱雅活动列表响应:",r);const u=(r==null?void 0:r.list)||[];Array.isArray(u)&&u.length>0?(p.value=u.map(i=>({label:`活动${i.id} - ${Pe(i.startTime).format("YYYY-MM-DD")} ~ ${Pe(i.endTime).format("YYYY-MM-DD")}`,value:i.id,startTime:i.startTime,endTime:i.endTime})),p.value.length>0&&!l.value&&(l.value=p.value[0].value),A.success(`加载了 ${p.value.length} 个欧莱雅活动`)):(A.warning("没有找到欧莱雅活动，请先创建活动"),p.value=[])}catch(r){console.error("获取欧莱雅活动列表失败:",r),A.error(`获取活动列表失败: ${(r==null?void 0:r.message)||"未知错误"}`),p.value=[]}finally{b.value=!1}})}function I(r){return K(this,null,function*(){var u;try{n.value=!0,console.log("正在获取活动数据，活动ID:",r);const i=yield Bt({activityId:r});console.log("获取活动数据响应:",i);const w=i;if(w&&w.id){c.value=w;const L=Array.isArray(w.products)?w.products:w.products?JSON.parse(w.products):[];if(f.value=L,t.value=z.value,f.value.length>0){const S=f.value.length,ue=f.value.reduce((_,U)=>_+(U.skuInvNum||0),0),B=(f.value.reduce((_,U)=>_+(U.skuSalePrice||0),0)/S/100).toFixed(2);A.success(`成功加载 ${S} 个商品，总库存 ${ue}，平均价格 ¥${B}`)}else A.warning("该活动数据库存在但暂无商品数据")}else f.value=[],t.value=[],c.value=null,A.info("该活动尚未爬取商品数据，请先爬取")}catch(i){console.error("获取产品数据失败:",i),((u=i==null?void 0:i.response)==null?void 0:u.status)===404?A.info("该活动尚未爬取商品数据，请先爬取"):A.error(`获取产品数据失败: ${(i==null?void 0:i.message)||"未知错误"}`),f.value=[],t.value=[],c.value=null}finally{n.value=!1}})}Q(l,r=>{r&&I(r)});function E(){t.value=z.value}function V(r){a.current=r.current,a.pageSize=r.pageSize,t.value=z.value}function $(){if(!l.value){A.warning("请先选择活动");return}O.setState({title:`爬取活动${l.value}的商品数据`}).setData({mode:"create",activityId:l.value}).open()}function d(){if(!l.value||!c.value){A.warning("请先选择活动");return}O.setState({title:"更新欧莱雅商品数据"}).setData({mode:"update",database:c.value,activityId:l.value,activityOptions:p.value}).open()}function j(){return K(this,null,function*(){try{x.value=!0;const r=yield _t(),u=new Blob([r],{type:"text/plain;charset=utf-8"}),i=window.URL.createObjectURL(u),w=document.createElement("a");w.href=i,w.download=`赠品表_${Pe().format("YYYY-MM-DD_HHmmss")}.txt`,document.body.appendChild(w),w.click(),document.body.removeChild(w),window.URL.revokeObjectURL(i),A.success("下载成功")}catch(r){A.error("下载失败")}finally{x.value=!1}})}function D(){return K(this,null,function*(){if(!c.value||!c.value.id){A.warning("请先选择要删除的数据");return}(yield yt(()=>import("./index-fo8MsSjQ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64])).then(i=>i.Modal)).confirm({title:"确认删除",content:`确定要删除活动${l.value}的商品数据吗？此操作不可恢复。`,okText:"确认删除",okType:"danger",cancelText:"取消",onOk(){return K(this,null,function*(){try{yield Rt(c.value.id),A.success("删除成功"),c.value=null,f.value=[],t.value=[],yield P(),p.value.length>0?l.value=p.value[0].value:l.value=void 0}catch(i){A.error(`删除失败: ${(i==null?void 0:i.message)||"未知错误"}`)}})}})})}return Ie(()=>{P()}),(r,u)=>(xe(),Le(N(Wt),{"content-class":"p-4",title:N(Xe)("page.home.lorealDatabase")},{default:W(()=>[s(N(C)),s(N(Gt),{title:N(Xe)("page.home.lorealDatabase")},{default:W(()=>[oe("div",In,[oe("div",An,[s(N(Xt),{value:l.value,"onUpdate:value":u[0]||(u[0]=i=>l.value=i),placeholder:"请选择活动",options:p.value,loading:b.value,style:{width:"350px"}},null,8,["value","options","loading"]),s(N(Zt),{value:o.value,"onUpdate:value":u[1]||(u[1]=i=>o.value=i),placeholder:"搜索商品名称、标识符、规格等",style:{width:"300px"},onPressEnter:E},null,8,["value"]),s(N(pe),{type:"primary",onClick:E},{default:W(()=>u[2]||(u[2]=[de("搜索")])),_:1}),u[7]||(u[7]=oe("div",{class:"flex-1"},null,-1)),s(N(pe),{type:"primary",onClick:$},{default:W(()=>u[3]||(u[3]=[de("爬取数据")])),_:1}),s(N(pe),{onClick:d,disabled:!c.value},{default:W(()=>u[4]||(u[4]=[de("更新数据")])),_:1},8,["disabled"]),s(N(pe),{danger:"",onClick:D,disabled:!c.value},{default:W(()=>u[5]||(u[5]=[de(" 删除数据 ")])),_:1},8,["disabled"]),s(N(pe),{type:"default",onClick:j,loading:x.value},{default:W(()=>u[6]||(u[6]=[de(" 下载赠品表 ")])),_:1},8,["loading"])]),c.value?(xe(),ht("div",kn,[s(N(Ft),null,{default:W(()=>[oe("span",null,"爬取时间: "+ze(N(Pe)(c.value.scrapedAt).format("YYYY-MM-DD HH:mm:ss")),1),oe("span",null,"商品总数: "+ze(f.value.length),1),oe("span",null,"总库存: "+ze(f.value.reduce((i,w)=>i+w.skuInvNum,0)),1)]),_:1})])):bt("",!0)]),l.value?(xe(),Le(N(Ht),{key:0,dataSource:t.value,columns:k,loading:n.value,pagination:a,onChange:V,scroll:{x:1100},rowKey:"skuId"},null,8,["dataSource","loading","pagination"])):(xe(),Le(N(zt),{key:1,description:"请选择活动查看商品数据",class:"py-16"}))]),_:1},8,["title"])]),_:1},8,["title"]))}}),Nn=Et(Dn,[["__scopeId","data-v-c4bad3a1"]]),Zn=Object.freeze(Object.defineProperty({__proto__:null,default:Nn},Symbol.toStringTag,{value:"Module"}));export{ne as I,Mn as a,Zn as i};
